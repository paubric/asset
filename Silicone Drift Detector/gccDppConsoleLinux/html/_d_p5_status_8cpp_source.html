<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>gccDppConsole Test C++ SDK: DeviceIO/DP5Status.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="vcDP5_CA.PNG"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">gccDppConsole Test C++ SDK
   &#160;<span id="projectnumber">20170920</span>
   </div>
   <div id="projectbrief">DPP C++ Console Demonstration</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">DeviceIO/DP5Status.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_d_p5_status_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;<a class="code" href="_d_p5_status_8h.html">DP5Status.h</a>&quot;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &quot;<a class="code" href="stringex_8h.html">stringex.h</a>&quot;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;<a class="code" href="_dpp_const_8h.html">DppConst.h</a>&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">    #pragma warning(disable:4996)</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span>
<a name="l00009"></a><a class="code" href="class_c_d_p5_status.html#a47fff54a98b635e3f45251ea463548f1">00009</a> <a class="code" href="class_c_d_p5_status.html#a47fff54a98b635e3f45251ea463548f1">CDP5Status::CDP5Status</a>(<span class="keywordtype">void</span>)
<a name="l00010"></a>00010 {
<a name="l00011"></a>00011 }
<a name="l00012"></a>00012 
<a name="l00013"></a><a class="code" href="class_c_d_p5_status.html#ab0e3f043453c09e910610fbaf84a5d3c">00013</a> <a class="code" href="class_c_d_p5_status.html#ab0e3f043453c09e910610fbaf84a5d3c">CDP5Status::~CDP5Status</a>(<span class="keywordtype">void</span>)
<a name="l00014"></a>00014 {
<a name="l00015"></a>00015 }
<a name="l00016"></a>00016 
<a name="l00017"></a><a class="code" href="class_c_d_p5_status.html#a18c3ccef9a955d68bbe6253321e9c524">00017</a> <span class="keywordtype">void</span> <a class="code" href="class_c_d_p5_status.html#a18c3ccef9a955d68bbe6253321e9c524" title="Convert a DPP status packet into DP4_FORMAT_STATUS data.">CDP5Status::Process_Status</a>(<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html">DP4_FORMAT_STATUS</a> *m_DP5_Status)
<a name="l00018"></a>00018 {
<a name="l00019"></a>00019         <span class="keywordtype">bool</span> bDMCA_LiveTime = <span class="keyword">false</span>;
<a name="l00020"></a>00020         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uiFwBuild = 0;
<a name="l00021"></a>00021 
<a name="l00022"></a>00022         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> = m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[39];
<a name="l00023"></a>00023     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0099d3df7dc1f55a11447414e7b21c3f">FastCount</a> = <a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#a0136323981ed1e622e3a8dcdaf148c19" title="Covert a long word into a double.">LongWordToDouble</a>(0, m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>);
<a name="l00024"></a>00024     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0ef09000d50dab0d0b98f1d55c6c38bb">SlowCount</a> = <a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#a0136323981ed1e622e3a8dcdaf148c19" title="Covert a long word into a double.">LongWordToDouble</a>(4, m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>);
<a name="l00025"></a>00025     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab7c85973296ace14c53e364fd3a798a1">GP_COUNTER</a> = <a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#a0136323981ed1e622e3a8dcdaf148c19" title="Covert a long word into a double.">LongWordToDouble</a>(8, m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>);
<a name="l00026"></a>00026     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0e791257c2be598fd6559d0bf2032c07">AccumulationTime</a> = (float)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[12] * 0.001 + (<span class="keywordtype">float</span>)(m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[13] + (float)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[14] * 256.0 + (<span class="keywordtype">float</span>)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[15] * 65536.0) * 0.1;
<a name="l00027"></a>00027         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab158af0f7e5a864e83aaa50ee09af62e">RealTime</a> = ((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[20] + ((<span class="keywordtype">double</span>)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[21] * 256.0) + ((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[22] * 65536.0) + ((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[23] * 16777216.0)) * 0.001;
<a name="l00028"></a>00028 
<a name="l00029"></a>00029         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a> = m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[24];
<a name="l00030"></a>00030     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2eca6958dd4828ada0488ce1e3781018">FPGA</a> = m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[25];
<a name="l00031"></a>00031         
<a name="l00032"></a>00032         <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a> &gt; 0x65) {
<a name="l00033"></a>00033                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aaf2c83305647984e2b847fc78e57d465">Build</a> = m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[37] &amp; 0xF;              <span class="comment">//Build # added in FW6.06</span>
<a name="l00034"></a>00034         } <span class="keywordflow">else</span> {
<a name="l00035"></a>00035                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aaf2c83305647984e2b847fc78e57d465">Build</a> = 0;
<a name="l00036"></a>00036         }
<a name="l00037"></a>00037 
<a name="l00038"></a>00038         <span class="comment">//Firmware Version:  6.07  Build:  0 has LiveTime and PREL</span>
<a name="l00039"></a>00039         <span class="comment">//DEVICE_ID 0=DP5,1=PX5,2=DP5G,3=MCA8000D,4=TB5</span>
<a name="l00040"></a>00040         <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {
<a name="l00041"></a>00041                 <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a> &gt;= 0x67) {
<a name="l00042"></a>00042                         bDMCA_LiveTime = <span class="keyword">true</span>;
<a name="l00043"></a>00043                 }
<a name="l00044"></a>00044         }
<a name="l00045"></a>00045 
<a name="l00046"></a>00046         <span class="keywordflow">if</span> (bDMCA_LiveTime) {
<a name="l00047"></a>00047                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a14d432748db31d04e73f972156323e21">LiveTime</a> = ((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[16] + ((<span class="keywordtype">double</span>)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[17] * 256.0) + ((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[18] * 65536.0) + ((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[19] * 16777216.0)) * 0.001;
<a name="l00048"></a>00048         } <span class="keywordflow">else</span> {
<a name="l00049"></a>00049                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a14d432748db31d04e73f972156323e21">LiveTime</a> = 0;
<a name="l00050"></a>00050         }
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[29] &lt; 128) {
<a name="l00053"></a>00053         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#abf6730cf0adf70dd56445261539329a5">SerialNumber</a> = (<span class="keywordtype">unsigned</span> long)<a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#a0136323981ed1e622e3a8dcdaf148c19" title="Covert a long word into a double.">LongWordToDouble</a>(26, m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>);
<a name="l00054"></a>00054     } <span class="keywordflow">else</span> {
<a name="l00055"></a>00055         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#abf6730cf0adf70dd56445261539329a5">SerialNumber</a> = -1;
<a name="l00056"></a>00056     }
<a name="l00057"></a>00057     
<a name="l00058"></a>00058         <span class="comment">// m_DP5_Status-&gt;HV = (double)(m_DP5_Status-&gt;RAW[31] + (m_DP5_Status-&gt;RAW[30] &amp; 15) * 256) * 0.5;                                       // 0.5V/count</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[30] &lt; 128)  {    <span class="comment">// not negative</span>
<a name="l00061"></a>00061         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2dc917b6f0bcddb462424a9606c74bbf">HV</a> = ((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[31] + ((<span class="keywordtype">double</span>)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[30] * 256.0)) * 0.5;  <span class="comment">// 0.5V/count</span>
<a name="l00062"></a>00062         } <span class="keywordflow">else</span> {
<a name="l00063"></a>00063                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2dc917b6f0bcddb462424a9606c74bbf">HV</a> = (((double)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[31] + ((<span class="keywordtype">double</span>)m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[30] * 256)) - 65536.0) * 0.5; <span class="comment">// 0.5V/count</span>
<a name="l00064"></a>00064         }
<a name="l00065"></a>00065       
<a name="l00066"></a>00066         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a356975170685d7e088e883ab65e596dc">DET_TEMP</a> = (double)((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[33]) + (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[32] &amp; 15) * 256) * 0.1; <span class="comment">// - 273.16;             // 0.1K/count</span>
<a name="l00067"></a>00067     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#adda369cb7b413880cbe06e5d45111c54">DP5_TEMP</a> = m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[34] - ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[34] &amp; 128) * 2);
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a33412d5a8634d23688d8a5fb3cc28c1b">PresetRtDone</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[35] &amp; 128) == 128);
<a name="l00070"></a>00070 
<a name="l00071"></a>00071         <span class="comment">//unsigned char:35 BIT:D6 </span>
<a name="l00072"></a>00072         <span class="comment">// == Preset LiveTime Done for MCA8000D</span>
<a name="l00073"></a>00073         <span class="comment">// == FAST Thresh locked for other dpp devices</span>
<a name="l00074"></a>00074         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#af1bc7af97f56bb1446ff3506308be999">PresetLtDone</a> = <span class="keyword">false</span>;
<a name="l00075"></a>00075         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a3210a7c92a87d82b4a7d75553cfa711d">AFAST_LOCKED</a> = <span class="keyword">false</span>;
<a name="l00076"></a>00076         <span class="keywordflow">if</span> (bDMCA_LiveTime) {           <span class="comment">// test for MCA8000D</span>
<a name="l00077"></a>00077                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#af1bc7af97f56bb1446ff3506308be999">PresetLtDone</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[35] &amp; 64) == 64);
<a name="l00078"></a>00078         } <span class="keywordflow">else</span> {
<a name="l00079"></a>00079                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a3210a7c92a87d82b4a7d75553cfa711d">AFAST_LOCKED</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[35] &amp; 64) == 64);
<a name="l00080"></a>00080         }
<a name="l00081"></a>00081     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a800504620b9d58034062240eea0f9828">MCA_EN</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[35] &amp; 32) == 32);
<a name="l00082"></a>00082     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a761c03c9adfe2a14409c097ca98a2581">PRECNT_REACHED</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[35] &amp; 16) == 16);
<a name="l00083"></a>00083     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab79e7475f4f45ae4113e7d87df241de1">SCOPE_DR</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[35] &amp; 4) == 4);
<a name="l00084"></a>00084     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aa7178004735d20006f63e7abf8a9f53d">DP5_CONFIGURED</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[35] &amp; 2) == 2);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a5e6529d00b5c568df77db5b8f06cfc2c">AOFFSET_LOCKED</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[36] &amp; 128) == 0);  <span class="comment">// 0=locked, 1=searching</span>
<a name="l00087"></a>00087     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a282da30ee4ba2d14186b3928bb0afa67">MCS_DONE</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[36] &amp; 64) == 64);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ae9cbfbe0581e70d7f1d6767a70362fd7">b80MHzMode</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[36] &amp; 2) == 2);
<a name="l00090"></a>00090     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a76232543faf300451faabe54d17d1856">bFPGAAutoClock</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[36] &amp; 1) == 1);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aad1bb2258a11eaaed755fba470f15b62">PC5_PRESENT</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[38] &amp; 128) == 128);
<a name="l00093"></a>00093     <span class="keywordflow">if</span>  (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aad1bb2258a11eaaed755fba470f15b62">PC5_PRESENT</a>) {
<a name="l00094"></a>00094         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a9b848583e1890194bd558898c187b911">PC5_HV_POL</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[38] &amp; 64) == 64);
<a name="l00095"></a>00095         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ade6d0a0c9234a50381fe5f3583ce609f">PC5_8_5V</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[38] &amp; 32) == 32);
<a name="l00096"></a>00096     } <span class="keywordflow">else</span> {
<a name="l00097"></a>00097         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a9b848583e1890194bd558898c187b911">PC5_HV_POL</a> = <span class="keyword">false</span>;
<a name="l00098"></a>00098         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ade6d0a0c9234a50381fe5f3583ce609f">PC5_8_5V</a> = <span class="keyword">false</span>;
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a> &gt;= 0x65) {           <span class="comment">// reboot flag added FW6.05</span>
<a name="l00102"></a>00102                 <span class="keywordflow">if</span> ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[36] &amp; 32) == 32) {
<a name="l00103"></a>00103             m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a107597b13e2442fb45faa98b5cb4fe93">ReBootFlag</a> = <span class="keyword">true</span>;
<a name="l00104"></a>00104                 } <span class="keywordflow">else</span> {
<a name="l00105"></a>00105                         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a107597b13e2442fb45faa98b5cb4fe93">ReBootFlag</a> = <span class="keyword">false</span>;
<a name="l00106"></a>00106                 }
<a name="l00107"></a>00107         } <span class="keywordflow">else</span> {
<a name="l00108"></a>00108         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a107597b13e2442fb45faa98b5cb4fe93">ReBootFlag</a> = <span class="keyword">false</span>;
<a name="l00109"></a>00109         }
<a name="l00110"></a>00110 
<a name="l00111"></a>00111         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a4ae0dd0edca22231a38b53d049a2355e">TEC_Voltage</a> = (((double)(m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[40] &amp; 15) * 256.0) + (double)(m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[41])) / 758.5;
<a name="l00112"></a>00112         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2ea201a36ab995cea2156bc5e775e33d">DPP_ECO</a> = m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[49];
<a name="l00113"></a>00113         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac69aeff75cf6a8b92d3b0b3fdfb6fa49">bScintHas80MHzOption</a> = <span class="keyword">false</span>;
<a name="l00114"></a>00114         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a37a1a9e5784c043595f28a9abaa024c6">DPP_options</a> = (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[42] &amp; 15);
<a name="l00115"></a>00115         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a9141615f495a5efa5c9c4462ae65ae95">HPGe_HV_INH</a> = <span class="keyword">false</span>;
<a name="l00116"></a>00116         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a99aa8c843fdb1c4914040ef69adfca04">HPGe_HV_INH_POL</a> = <span class="keyword">false</span>;
<a name="l00117"></a>00117         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a4a1598ca6a5f2579804ee229de7d7f2d">AU34_2</a> = <span class="keyword">false</span>;
<a name="l00118"></a>00118         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab5e739420740554bdb8aabf75fcdc41f">isAscInstalled</a> = <span class="keyword">false</span>;
<a name="l00119"></a>00119         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aaddccf9c479138f2069667fd6c4355ae">isDP5_RevDxGains</a> = <span class="keyword">false</span>;
<a name="l00120"></a>00120         <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a5180f33d76b0497ca5cdc9e26e5c3ed7" title="PX5 uses DPP new (this) protocol is supported in this application ==1.">dppPX5</a>) {
<a name="l00121"></a>00121                 <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a37a1a9e5784c043595f28a9abaa024c6">DPP_options</a> == <a class="code" href="_d_p5_status_8h.html#a703374565dca96ccc5d3617d08e01f80acb3d43dc89dc47fa3117b39ce8a53d8b">PX5_OPTION_HPGe_HVPS</a>) {
<a name="l00122"></a>00122                         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a9141615f495a5efa5c9c4462ae65ae95">HPGe_HV_INH</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[42] &amp; 32) == 32);
<a name="l00123"></a>00123                         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a99aa8c843fdb1c4914040ef69adfca04">HPGe_HV_INH_POL</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[42] &amp; 16) == 16);
<a name="l00124"></a>00124                         <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2ea201a36ab995cea2156bc5e775e33d">DPP_ECO</a> == 1) {
<a name="l00125"></a>00125                                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab5e739420740554bdb8aabf75fcdc41f">isAscInstalled</a> = <span class="keyword">true</span>;
<a name="l00126"></a>00126                                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a4a1598ca6a5f2579804ee229de7d7f2d">AU34_2</a> = ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a19a1aafcec691c9e14c88a15e59dad81">RAW</a>[42] &amp; 64) == 64);
<a name="l00127"></a>00127                         }
<a name="l00128"></a>00128                 }
<a name="l00129"></a>00129         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a7d1a80de2382823329d756c8c7eebf48" title="DP5G uses DPP new (this) protocol is supported in this application ==2.">dppDP5G</a>) || (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a390a283ff146ebb066fdddc7472f9f32" title="TB5 uses DPP new (this) protocol is supported in this application ==4.">dppTB5</a>)) {
<a name="l00130"></a>00130                 <span class="keywordflow">if</span> ((m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2ea201a36ab995cea2156bc5e775e33d">DPP_ECO</a> == 1) || (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2ea201a36ab995cea2156bc5e775e33d">DPP_ECO</a> == 2)) {
<a name="l00131"></a>00131                         <span class="comment">// DPP_ECO == 2 80MHz option added 20150409</span>
<a name="l00132"></a>00132                         m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac69aeff75cf6a8b92d3b0b3fdfb6fa49">bScintHas80MHzOption</a> = <span class="keyword">true</span>;
<a name="l00133"></a>00133                 }
<a name="l00134"></a>00134         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5aaf3625d736638478a34d61e76e278af3" title="DP5 uses DPP new (this) protocol is supported in this application ==0.">dppDP5</a>) {
<a name="l00135"></a>00135                 uiFwBuild = m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a>;
<a name="l00136"></a>00136                 uiFwBuild = uiFwBuild &lt;&lt; 8;
<a name="l00137"></a>00137                 uiFwBuild = uiFwBuild + m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aaf2c83305647984e2b847fc78e57d465">Build</a>;
<a name="l00138"></a>00138                 <span class="comment">// uiFwBuild - firmware with build for comparison</span>
<a name="l00139"></a>00139                 <span class="keywordflow">if</span> (uiFwBuild &gt;= 0x686) {
<a name="l00140"></a>00140                         <span class="comment">// 0xFF Value indicates old Analog Gain Count of 16</span>
<a name="l00141"></a>00141                         <span class="comment">// Values &lt; 0xFF indicate new gain count of 24 and new board rev</span>
<a name="l00142"></a>00142                         <span class="comment">// &quot;DP5 G3 Configuration P&quot; will not be used (==0xFF)</span>
<a name="l00143"></a>00143                         <span class="keywordflow">if</span> (m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2ea201a36ab995cea2156bc5e775e33d">DPP_ECO</a> &lt; 0xFF) {             
<a name="l00144"></a>00144                                 m_DP5_Status-&gt;<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aaddccf9c479138f2069667fd6c4355ae">isDP5_RevDxGains</a> = <span class="keyword">true</span>;
<a name="l00145"></a>00145                         }
<a name="l00146"></a>00146                         
<a name="l00147"></a>00147                 }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149         }
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a><a class="code" href="class_c_d_p5_status.html#a527a4109da4441034900bb40a90fb454">00152</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#a527a4109da4441034900bb40a90fb454">CDP5Status::DP5_Dx_OptionFlags</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> DP5_Dx_Options) {
<a name="l00153"></a>00153         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> D7D6;
<a name="l00154"></a>00154         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> D5D4;
<a name="l00155"></a>00155         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> D3D0;
<a name="l00156"></a>00156         <span class="keywordtype">string</span> strRev(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00157"></a>00157         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159         <span class="comment">//D7-D6: 0 = DP5 Rev D</span>
<a name="l00160"></a>00160         <span class="comment">//       1 = DP5 Rev E (future)</span>
<a name="l00161"></a>00161         <span class="comment">//       2 = DP5 Rev F (future)</span>
<a name="l00162"></a>00162         <span class="comment">//       3 = DP5 Rev G (future)</span>
<a name="l00163"></a>00163         D7D6 = ((DP5_Dx_Options &gt;&gt; 6) &amp; 0x03) + <span class="charliteral">&#39;D&#39;</span>;
<a name="l00164"></a>00164         <span class="comment">//D5-D4: minor rev, 0-3 (i.e. Rev D0, D1 etc.)</span>
<a name="l00165"></a>00165         D5D4 = ((DP5_Dx_Options &gt;&gt; 4) &amp; 0x03);
<a name="l00166"></a>00166         <span class="comment">//D3-D0: Configuration 0 = A, 1=B, 2=C... 15=P.</span>
<a name="l00167"></a>00167         D3D0 = (DP5_Dx_Options &amp; 0x0F) + <span class="charliteral">&#39;A&#39;</span>;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169         strRev = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;DP5 Rev %c%d Configuration %c&quot;</span>,D7D6,D5D4,D3D0);
<a name="l00170"></a>00170         <span class="keywordflow">return</span>(strRev);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a><a class="code" href="class_c_d_p5_status.html#a94d1aa88585e0cfc412f72c443d22847">00174</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#a94d1aa88585e0cfc412f72c443d22847" title="Convert DP4_FORMAT_STATUS data into a status display string.">CDP5Status::ShowStatusValueStrings</a>(<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html">DP4_FORMAT_STATUS</a> m_DP5_Status) 
<a name="l00175"></a>00175 { 
<a name="l00176"></a>00176     <span class="keywordtype">string</span> strConfig(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00177"></a>00177     <span class="keywordtype">string</span> strTemp;
<a name="l00178"></a>00178         <span class="keywordtype">string</span> strIntPart;
<a name="l00179"></a>00179         <span class="keywordtype">string</span> strFracPart;
<a name="l00180"></a>00180         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182         strTemp = <a class="code" href="class_c_d_p5_status.html#aee39737859ce152bc507e5e131956ad9" title="Format a device type indicator as a device name string.">GetDeviceNameFromVal</a>(m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a>);
<a name="l00183"></a>00183         strConfig = <span class="stringliteral">&quot;Device Type: &quot;</span> + strTemp + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00184"></a>00184         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Serial Number: %lu\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#abf6730cf0adf70dd56445261539329a5">SerialNumber</a>);     <span class="comment">//SerialNumber</span>
<a name="l00185"></a>00185         strConfig += strTemp;
<a name="l00186"></a>00186         strTemp = <span class="stringliteral">&quot;Firmware: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#ae968793aa4b33563a2d3b8c288042a37" title="Convert a byte version value into a string.">BYTEVersionToString</a>(m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a>);   
<a name="l00187"></a>00187         strConfig += strTemp;
<a name="l00188"></a>00188         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a> &gt; 0x65) {
<a name="l00189"></a>00189                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;  Build:  %d\r\n&quot;</span>, m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aaf2c83305647984e2b847fc78e57d465">Build</a>);
<a name="l00190"></a>00190                 strConfig += strTemp;
<a name="l00191"></a>00191         } <span class="keywordflow">else</span> {
<a name="l00192"></a>00192                 strConfig += <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00193"></a>00193         }               
<a name="l00194"></a>00194         strTemp = <span class="stringliteral">&quot;FPGA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#ae968793aa4b33563a2d3b8c288042a37" title="Convert a byte version value into a string.">BYTEVersionToString</a>(m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2eca6958dd4828ada0488ce1e3781018">FPGA</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>; 
<a name="l00195"></a>00195         strConfig += strTemp;
<a name="l00196"></a>00196         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> != <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {
<a name="l00197"></a>00197                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Fast Count: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0099d3df7dc1f55a11447414e7b21c3f">FastCount</a>);          <span class="comment">//FastCount</span>
<a name="l00198"></a>00198                 strConfig += strTemp;
<a name="l00199"></a>00199         }
<a name="l00200"></a>00200         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Slow Count: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0ef09000d50dab0d0b98f1d55c6c38bb">SlowCount</a>);          <span class="comment">//SlowCount</span>
<a name="l00201"></a>00201         strConfig += strTemp;
<a name="l00202"></a>00202         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;GP Count: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab7c85973296ace14c53e364fd3a798a1">GP_COUNTER</a>);           <span class="comment">//GP Count</span>
<a name="l00203"></a>00203         strConfig += strTemp;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> != <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {
<a name="l00206"></a>00206                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Accumulation Time: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0e791257c2be598fd6559d0bf2032c07">AccumulationTime</a>);        <span class="comment">//AccumulationTime</span>
<a name="l00207"></a>00207                 strConfig += strTemp;
<a name="l00208"></a>00208         }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Real Time: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab158af0f7e5a864e83aaa50ee09af62e">RealTime</a>);        <span class="comment">//RealTime</span>
<a name="l00211"></a>00211         strConfig += strTemp;
<a name="l00212"></a>00212 
<a name="l00213"></a>00213         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {
<a name="l00214"></a>00214                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Live Time: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a14d432748db31d04e73f972156323e21">LiveTime</a>);        <span class="comment">//RealTime</span>
<a name="l00215"></a>00215                 strConfig += strTemp;
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218         <span class="keywordflow">return</span> strConfig;
<a name="l00219"></a>00219 }
<a name="l00220"></a>00220 
<a name="l00221"></a><a class="code" href="class_c_d_p5_status.html#add0b05aaeccfd6c7fe7490210e58564b">00221</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#add0b05aaeccfd6c7fe7490210e58564b">CDP5Status::PX5_OptionsString</a>(<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html">DP4_FORMAT_STATUS</a> m_DP5_Status)
<a name="l00222"></a>00222 {
<a name="l00223"></a>00223         <span class="keywordtype">string</span> strOptions(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00224"></a>00224         <span class="keywordtype">string</span> strValue(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a5180f33d76b0497ca5cdc9e26e5c3ed7" title="PX5 uses DPP new (this) protocol is supported in this application ==1.">dppPX5</a>) {
<a name="l00227"></a>00227         <span class="comment">//m_DP5_Status.DPP_options = 1;</span>
<a name="l00228"></a>00228         <span class="comment">//m_DP5_Status.HPGe_HV_INH = true;</span>
<a name="l00229"></a>00229         <span class="comment">//m_DP5_Status.HPGe_HV_INH_POL = true;</span>
<a name="l00230"></a>00230         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a37a1a9e5784c043595f28a9abaa024c6">DPP_options</a> &gt; 0) {
<a name="l00231"></a>00231             <span class="comment">//===============PX5 Options==================</span>
<a name="l00232"></a>00232             strOptions += <span class="stringliteral">&quot;PX5 Options: &quot;</span>;
<a name="l00233"></a>00233             <span class="keywordflow">if</span> ((m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a37a1a9e5784c043595f28a9abaa024c6">DPP_options</a> &amp; 1) == 1) {
<a name="l00234"></a>00234                 strOptions += <span class="stringliteral">&quot;HPGe HVPS\r\n&quot;</span>;
<a name="l00235"></a>00235             } <span class="keywordflow">else</span> {
<a name="l00236"></a>00236                 strOptions += <span class="stringliteral">&quot;Unknown\r\n&quot;</span>;
<a name="l00237"></a>00237             }
<a name="l00238"></a>00238             <span class="comment">//===============HPGe HVPS HV Status==================</span>
<a name="l00239"></a>00239             strOptions += <span class="stringliteral">&quot;HPGe HV: &quot;</span>;
<a name="l00240"></a>00240             <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a9141615f495a5efa5c9c4462ae65ae95">HPGe_HV_INH</a>) {
<a name="l00241"></a>00241                 strOptions += <span class="stringliteral">&quot;not inhibited\r\n&quot;</span>;
<a name="l00242"></a>00242             } <span class="keywordflow">else</span> {
<a name="l00243"></a>00243                 strOptions += <span class="stringliteral">&quot;inhibited\r\n&quot;</span>;
<a name="l00244"></a>00244             }
<a name="l00245"></a>00245             <span class="comment">//===============HPGe HVPS Inhibit Status==================</span>
<a name="l00246"></a>00246             strOptions += <span class="stringliteral">&quot;INH Polarity: &quot;</span>;
<a name="l00247"></a>00247             <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a99aa8c843fdb1c4914040ef69adfca04">HPGe_HV_INH_POL</a>) {
<a name="l00248"></a>00248                 strOptions += <span class="stringliteral">&quot;high\r\n&quot;</span>;
<a name="l00249"></a>00249             } <span class="keywordflow">else</span> {
<a name="l00250"></a>00250                 strOptions += <span class="stringliteral">&quot;low\r\n&quot;</span>;
<a name="l00251"></a>00251             }
<a name="l00252"></a>00252         } <span class="keywordflow">else</span> {
<a name="l00253"></a>00253             strOptions += <span class="stringliteral">&quot;PX5 Options: None\r\n&quot;</span>;  <span class="comment">//           strOptions += &quot;No Options Installed&quot;</span>
<a name="l00254"></a>00254         }
<a name="l00255"></a>00255     }
<a name="l00256"></a>00256         <span class="keywordflow">return</span> strOptions; 
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="class_c_d_p5_status.html#abf356d18697536d1ccdb49bc3279c3b6">00259</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#abf356d18697536d1ccdb49bc3279c3b6">CDP5Status::GetStatusValueStrings</a>(<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html">DP4_FORMAT_STATUS</a> m_DP5_Status) 
<a name="l00260"></a>00260 { 
<a name="l00261"></a>00261     <span class="keywordtype">string</span> strConfig(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00262"></a>00262     <span class="keywordtype">string</span> strTemp;
<a name="l00263"></a>00263         <span class="keywordtype">string</span> strIntPart;
<a name="l00264"></a>00264         <span class="keywordtype">string</span> strFracPart;
<a name="l00265"></a>00265         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267         strTemp = <a class="code" href="class_c_d_p5_status.html#aee39737859ce152bc507e5e131956ad9" title="Format a device type indicator as a device name string.">GetDeviceNameFromVal</a>(m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a>);
<a name="l00268"></a>00268         strConfig = <span class="stringliteral">&quot;Device Type: &quot;</span> + strTemp + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00269"></a>00269         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Serial Number: %lu\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#abf6730cf0adf70dd56445261539329a5">SerialNumber</a>);     <span class="comment">//SerialNumber</span>
<a name="l00270"></a>00270         strConfig += strTemp;
<a name="l00271"></a>00271         strTemp = <span class="stringliteral">&quot;Firmware: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#ae968793aa4b33563a2d3b8c288042a37" title="Convert a byte version value into a string.">BYTEVersionToString</a>(m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a>);   
<a name="l00272"></a>00272         strConfig += strTemp;
<a name="l00273"></a>00273         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ac1a93246bec0560912126f6ca5528c5a">Firmware</a> &gt; 0x65) {
<a name="l00274"></a>00274                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;  Build:  %d\r\n&quot;</span>, m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#aaf2c83305647984e2b847fc78e57d465">Build</a>);
<a name="l00275"></a>00275                 strConfig += strTemp;
<a name="l00276"></a>00276         } <span class="keywordflow">else</span> {
<a name="l00277"></a>00277                 strConfig += <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00278"></a>00278         }
<a name="l00279"></a>00279         strTemp = <span class="stringliteral">&quot;FPGA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#ae968793aa4b33563a2d3b8c288042a37" title="Convert a byte version value into a string.">BYTEVersionToString</a>(m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2eca6958dd4828ada0488ce1e3781018">FPGA</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>; 
<a name="l00280"></a>00280         strConfig += strTemp;
<a name="l00281"></a>00281         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> != <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {
<a name="l00282"></a>00282                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Fast Count: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0099d3df7dc1f55a11447414e7b21c3f">FastCount</a>);          <span class="comment">//FastCount</span>
<a name="l00283"></a>00283                 strConfig += strTemp;
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Slow Count: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0ef09000d50dab0d0b98f1d55c6c38bb">SlowCount</a>);          <span class="comment">//SlowCount</span>
<a name="l00286"></a>00286         strConfig += strTemp;
<a name="l00287"></a>00287         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;GP Count: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab7c85973296ace14c53e364fd3a798a1">GP_COUNTER</a>);           <span class="comment">//GP Count</span>
<a name="l00288"></a>00288         strConfig += strTemp;
<a name="l00289"></a>00289 
<a name="l00290"></a>00290         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> != <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {
<a name="l00291"></a>00291                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Accumulation Time: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a0e791257c2be598fd6559d0bf2032c07">AccumulationTime</a>);        <span class="comment">//AccumulationTime</span>
<a name="l00292"></a>00292                 strConfig += strTemp;
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294 
<a name="l00295"></a>00295         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Real Time: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#ab158af0f7e5a864e83aaa50ee09af62e">RealTime</a>);        <span class="comment">//RealTime</span>
<a name="l00296"></a>00296         strConfig += strTemp;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {
<a name="l00299"></a>00299                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Live Time: %.0f\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a14d432748db31d04e73f972156323e21">LiveTime</a>);        <span class="comment">//RealTime</span>
<a name="l00300"></a>00300                 strConfig += strTemp;
<a name="l00301"></a>00301         }
<a name="l00302"></a>00302 
<a name="l00303"></a>00303    <span class="keywordflow">if</span> ((m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> != <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a7d1a80de2382823329d756c8c7eebf48" title="DP5G uses DPP new (this) protocol is supported in this application ==2.">dppDP5G</a>) &amp;&amp; (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> != <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a390a283ff146ebb066fdddc7472f9f32" title="TB5 uses DPP new (this) protocol is supported in this application ==4.">dppTB5</a>) &amp;&amp; (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> != <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>)) {
<a name="l00304"></a>00304         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Detector Temp: %.0fK\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a356975170685d7e088e883ab65e596dc">DET_TEMP</a>);               <span class="comment">//&quot;##0C&quot;) &#39; round to nearest degree</span>
<a name="l00305"></a>00305                 strConfig += strTemp;
<a name="l00306"></a>00306                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Detector HV: %.0fV\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2dc917b6f0bcddb462424a9606c74bbf">HV</a>);
<a name="l00307"></a>00307                 strConfig += strTemp;
<a name="l00308"></a>00308                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Board Temp: %dC\r\n&quot;</span>,(<span class="keywordtype">int</span>)m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#adda369cb7b413880cbe06e5d45111c54">DP5_TEMP</a>);
<a name="l00309"></a>00309                 strConfig += strTemp;
<a name="l00310"></a>00310         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a7d1a80de2382823329d756c8c7eebf48" title="DP5G uses DPP new (this) protocol is supported in this application ==2.">dppDP5G</a>) || (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a390a283ff146ebb066fdddc7472f9f32" title="TB5 uses DPP new (this) protocol is supported in this application ==4.">dppTB5</a>)) {         <span class="comment">// GAMMARAD5,TB5</span>
<a name="l00311"></a>00311                 <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a356975170685d7e088e883ab65e596dc">DET_TEMP</a> &gt; 0) {
<a name="l00312"></a>00312                         strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Detector Temp: %.1fK\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a356975170685d7e088e883ab65e596dc">DET_TEMP</a>);
<a name="l00313"></a>00313                         strConfig += strTemp;
<a name="l00314"></a>00314                 } <span class="keywordflow">else</span> {
<a name="l00315"></a>00315                         strConfig += <span class="stringliteral">&quot;&quot;</span>;
<a name="l00316"></a>00316                 }
<a name="l00317"></a>00317                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;HV Set: %.0fV\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a2dc917b6f0bcddb462424a9606c74bbf">HV</a>);
<a name="l00318"></a>00318                 strConfig += strTemp;
<a name="l00319"></a>00319         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a8ac8d844e3156c1b347ed6944c7e2bb5" title="MCA8000D uses DPP new (this) protocol is supported in this application ==3.">dppMCA8000D</a>) {             <span class="comment">// Digital MCA</span>
<a name="l00320"></a>00320                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Board Temp: %dC\r\n&quot;</span>,(<span class="keywordtype">int</span>)m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#adda369cb7b413880cbe06e5d45111c54">DP5_TEMP</a>);
<a name="l00321"></a>00321                 strConfig += strTemp;
<a name="l00322"></a>00322         }
<a name="l00323"></a>00323         <span class="keywordflow">if</span> (m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a165b1eec1f626ad25b6aa8b98dbd9615">DEVICE_ID</a> == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a5180f33d76b0497ca5cdc9e26e5c3ed7" title="PX5 uses DPP new (this) protocol is supported in this application ==1.">dppPX5</a>) {
<a name="l00324"></a>00324                 strTemp = <a class="code" href="class_c_d_p5_status.html#add0b05aaeccfd6c7fe7490210e58564b">PX5_OptionsString</a>(m_DP5_Status);
<a name="l00325"></a>00325                 strConfig += strTemp;
<a name="l00326"></a>00326                 strTemp = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;TEC V: %.3fV\r\n&quot;</span>,m_DP5_Status.<a class="code" href="struct_d_p5___d_p4___f_o_r_m_a_t___s_t_a_t_u_s.html#a4ae0dd0edca22231a38b53d049a2355e">TEC_Voltage</a>);
<a name="l00327"></a>00327                 strConfig += strTemp;
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329         <span class="keywordflow">return</span> strConfig;
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="class_c_d_p5_status.html#af3cc4e35f9786e863d38de800c5b65fc">00332</a> <span class="keywordtype">void</span> <a class="code" href="class_c_d_p5_status.html#af3cc4e35f9786e863d38de800c5b65fc" title="Convert a DPP diagnostic data packet into DiagDataType data.">CDP5Status::Process_Diagnostics</a>(<a class="code" href="struct___packet___in.html">Packet_In</a> PIN, <a class="code" href="struct___diag_data_type.html">DiagDataType</a> *dd, <span class="keywordtype">int</span> device_type)
<a name="l00333"></a>00333 {
<a name="l00334"></a>00334     <span class="keywordtype">long</span> idxVal;
<a name="l00335"></a>00335     <span class="keywordtype">string</span> strVal;
<a name="l00336"></a>00336         <span class="keywordtype">double</span> DP5_ADC_Gain[10];  <span class="comment">// convert each ADC count to engineering units - values calculated in FORM.LOAD</span>
<a name="l00337"></a>00337         <span class="keywordtype">double</span> PC5_ADC_Gain[3];
<a name="l00338"></a>00338         <span class="keywordtype">double</span> PX5_ADC_Gain[12];
<a name="l00339"></a>00339     <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00340"></a>00340 
<a name="l00341"></a>00341     DP5_ADC_Gain[0] = 1.0 / 0.00286;                <span class="comment">// 2.86mV/C</span>
<a name="l00342"></a>00342     DP5_ADC_Gain[1] = 1.0;                          <span class="comment">// Vdd mon (out-of-scale)</span>
<a name="l00343"></a>00343     DP5_ADC_Gain[2] = (30.1 + 20.0) / 20.0;           <span class="comment">// PWR</span>
<a name="l00344"></a>00344     DP5_ADC_Gain[3] = (13.0 + 20.0) / 20.0;            <span class="comment">// 3.3V</span>
<a name="l00345"></a>00345     DP5_ADC_Gain[4] = (4.99 + 20.0) / 20.0;         <span class="comment">// 2.5V</span>
<a name="l00346"></a>00346     DP5_ADC_Gain[5] = 1.0;                          <span class="comment">// 1.2V</span>
<a name="l00347"></a>00347     DP5_ADC_Gain[6] = (35.7 + 20.0) / 20.0;          <span class="comment">// 5.5V</span>
<a name="l00348"></a>00348     DP5_ADC_Gain[7] = (35.7 + 75.0) / 35.7;        <span class="comment">// -5.5V (this one is tricky)</span>
<a name="l00349"></a>00349     DP5_ADC_Gain[8] = 1.0;                          <span class="comment">// AN_IN</span>
<a name="l00350"></a>00350     DP5_ADC_Gain[9] = 1.0;                          <span class="comment">// VREF_IN</span>
<a name="l00351"></a>00351     
<a name="l00352"></a>00352     PC5_ADC_Gain[0] = 500.0;                        <span class="comment">// HV: 1500V/3V</span>
<a name="l00353"></a>00353     PC5_ADC_Gain[1] = 100.0;                        <span class="comment">// TEC: 300K/3V</span>
<a name="l00354"></a>00354     PC5_ADC_Gain[2] = (20.0 + 10.0) / 10.0;            <span class="comment">// +8.5/5V</span>
<a name="l00355"></a>00355 
<a name="l00356"></a>00356         <span class="comment">//PX5_ADC_Gain[0] = (30.1 + 20.0) / 20.0;          // PWR</span>
<a name="l00357"></a>00357         PX5_ADC_Gain[0] = (69.8 + 20.0) / 20.0;          <span class="comment">// 9V (was originally PWR)</span>
<a name="l00358"></a>00358     PX5_ADC_Gain[1] = (13.0 + 20.0) / 20.0;            <span class="comment">// 3.3V</span>
<a name="l00359"></a>00359     PX5_ADC_Gain[2] = (4.99 + 20.0) / 20.0;          <span class="comment">// 2.5V</span>
<a name="l00360"></a>00360     PX5_ADC_Gain[3] = 1.0;                         <span class="comment">// 1.2V</span>
<a name="l00361"></a>00361     PX5_ADC_Gain[4] = (30.1 + 20.0) / 20.0;          <span class="comment">// 5V</span>
<a name="l00362"></a>00362     PX5_ADC_Gain[5] = (10.7 + 75.0) / 10.7;         <span class="comment">// -5V (this one is tricky)</span>
<a name="l00363"></a>00363     PX5_ADC_Gain[6] = (64.9 + 20.0) / 20.0;          <span class="comment">// +PA</span>
<a name="l00364"></a>00364     PX5_ADC_Gain[7] = (10.7 + 75) / 10.7;        <span class="comment">// -PA</span>
<a name="l00365"></a>00365     PX5_ADC_Gain[8] = (16.0 + 20.0) / 20.0;            <span class="comment">// +TEC</span>
<a name="l00366"></a>00366     PX5_ADC_Gain[9] = 500.0;                       <span class="comment">// HV: 1500V/3V</span>
<a name="l00367"></a>00367     PX5_ADC_Gain[10] = 100.0;                       <span class="comment">// TEC: 300K/3V</span>
<a name="l00368"></a>00368     PX5_ADC_Gain[11] = 1.0 / 0.00286;               <span class="comment">// 2.86mV/C</span>
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     dd-&gt;<a class="code" href="struct___diag_data_type.html#ab9027532ae6c10b2123b38f707b4bcc0">Firmware</a> = PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[0];
<a name="l00371"></a>00371     dd-&gt;<a class="code" href="struct___diag_data_type.html#adfce1d689bfe245f75a20b5aef83dbae">FPGA</a> = PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[1];
<a name="l00372"></a>00372     strVal = <span class="stringliteral">&quot;0x0&quot;</span> + <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[2], 2) + <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[3], 2) + <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[4], 2);
<a name="l00373"></a>00373     dd-&gt;<a class="code" href="struct___diag_data_type.html#a2ff8ab48deb8345f165f3d26eb2fec66">SRAMTestData</a> = strtol(strVal.c_str(),NULL,0);
<a name="l00374"></a>00374     dd-&gt;<a class="code" href="struct___diag_data_type.html#a51fdf6afe6b8b8a37cf653833f76f0ee">SRAMTestPass</a> = (dd-&gt;<a class="code" href="struct___diag_data_type.html#a2ff8ab48deb8345f165f3d26eb2fec66">SRAMTestData</a> == 0xFFFFFF);
<a name="l00375"></a>00375     dd-&gt;<a class="code" href="struct___diag_data_type.html#aa02452a5ec3c33df528b050dbaebed70">TempOffset</a> = PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[180] + 256 * (PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[180] &gt; 127);  <span class="comment">// 8-bit signed value</span>
<a name="l00376"></a>00376 
<a name="l00377"></a>00377         <span class="keywordflow">if</span> ((device_type == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5aaf3625d736638478a34d61e76e278af3" title="DP5 uses DPP new (this) protocol is supported in this application ==0.">dppDP5</a>) || (device_type == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a25bc4ac15e8ad70a638d6879d3d7bdc8" title="DP5X uses DPP new (this) protocol is supported in this application ==5.">dppDP5X</a>)) {
<a name="l00378"></a>00378                 <span class="keywordflow">for</span>(idxVal=0;idxVal&lt;10;idxVal++){
<a name="l00379"></a>00379                         dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[idxVal] = (float)((((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[5 + idxVal * 2] &amp; 3) * 256) + PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[6 + idxVal * 2]) * 2.44 / 1024.0 * DP5_ADC_Gain[idxVal]); <span class="comment">// convert counts to engineering units (C or V)</span>
<a name="l00380"></a>00380                 }
<a name="l00381"></a>00381                 dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[7] = dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[7] + dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[6] * (float)(1.0 - DP5_ADC_Gain[7]);  <span class="comment">// -5.5V is a function of +5.5V</span>
<a name="l00382"></a>00382                 dd-&gt;<a class="code" href="struct___diag_data_type.html#ac28941a7ea008ec548dff298953d5365">strTempRaw</a> = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%   #.0f0C&quot;</span>, dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[0] - 271.3);
<a name="l00383"></a>00383                 dd-&gt;<a class="code" href="struct___diag_data_type.html#a72555b0f3326ef34e955f77a748b7d0d">strTempCal</a> = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%   #.0f0C&quot;</span>, (dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[0] - 280.0 + dd-&gt;<a class="code" href="struct___diag_data_type.html#aa02452a5ec3c33df528b050dbaebed70">TempOffset</a>));
<a name="l00384"></a>00384         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (device_type == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a5180f33d76b0497ca5cdc9e26e5c3ed7" title="PX5 uses DPP new (this) protocol is supported in this application ==1.">dppPX5</a>) {
<a name="l00385"></a>00385         <span class="keywordflow">for</span>(idxVal=0;idxVal&lt;11;idxVal++){
<a name="l00386"></a>00386             dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[idxVal] = (float)((((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[5 + idxVal * 2] &amp; 15) * 256) + PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[6 + idxVal * 2]) * 3.0 / 4096.0 * PX5_ADC_Gain[idxVal]);   <span class="comment">// convert counts to engineering units (C or V)</span>
<a name="l00387"></a>00387                 }
<a name="l00388"></a>00388         dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[11] = (float)((((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[5 + 11 * 2] &amp; 3) * 256) + PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[6 + 11 * 2]) * 3.0 / 1024.0 * PX5_ADC_Gain[11]);  <span class="comment">// convert counts to engineering units (C or V)</span>
<a name="l00389"></a>00389         dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[5] = (float)(dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[5] - (3.0 * PX5_ADC_Gain[5]) + 3.0); <span class="comment">// -5V uses +3VR</span>
<a name="l00390"></a>00390         dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[7] = (float)(dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[7] - (3.0 * PX5_ADC_Gain[7]) + 3.0); <span class="comment">// -PA uses +3VR</span>
<a name="l00391"></a>00391                 dd-&gt;<a class="code" href="struct___diag_data_type.html#ac28941a7ea008ec548dff298953d5365">strTempRaw</a> = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%#.1fC&quot;</span>, dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[11] - 271.3);
<a name="l00392"></a>00392                 dd-&gt;<a class="code" href="struct___diag_data_type.html#a72555b0f3326ef34e955f77a748b7d0d">strTempCal</a> = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%#.1fC&quot;</span>, (dd-&gt;<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[11] - 280.0 + dd-&gt;<a class="code" href="struct___diag_data_type.html#aa02452a5ec3c33df528b050dbaebed70">TempOffset</a>));
<a name="l00393"></a>00393         }       
<a name="l00394"></a>00394         
<a name="l00395"></a>00395     dd-&gt;<a class="code" href="struct___diag_data_type.html#a853f9702254fc7234db9b24bebfba49f">PC5_PRESENT</a> = <span class="keyword">false</span>;  <span class="comment">// assume no PC5, then check to see if there are any non-zero bytes</span>
<a name="l00396"></a>00396         <span class="keywordflow">for</span>(idxVal=25;idxVal&lt;=38;idxVal++) {
<a name="l00397"></a>00397                 <span class="keywordflow">if</span> (PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[idxVal] &gt; 0) {
<a name="l00398"></a>00398             dd-&gt;<a class="code" href="struct___diag_data_type.html#a853f9702254fc7234db9b24bebfba49f">PC5_PRESENT</a> = <span class="keyword">true</span>;
<a name="l00399"></a>00399             <span class="keywordflow">break</span>;
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403     <span class="keywordflow">if</span> (dd-&gt;<a class="code" href="struct___diag_data_type.html#a853f9702254fc7234db9b24bebfba49f">PC5_PRESENT</a>) {
<a name="l00404"></a>00404                 <span class="keywordflow">for</span>(idxVal=0;idxVal&lt;=2;idxVal++) {
<a name="l00405"></a>00405                         dd-&gt;<a class="code" href="struct___diag_data_type.html#a46c5c5d57569166b3b1501e5b28e7320">PC5_V</a>[idxVal] = (float)((((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[25 + idxVal * 2] &amp; 15) * 256) + PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[26 + idxVal * 2]) * 3.0 / 4096.0 * PC5_ADC_Gain[idxVal]); <span class="comment">// convert counts to engineering units (C or V)</span>
<a name="l00406"></a>00406                 }
<a name="l00407"></a>00407                 <span class="keywordflow">if</span> (PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[34] &lt; 128) {
<a name="l00408"></a>00408                         dd-&gt;<a class="code" href="struct___diag_data_type.html#a14836e38f3bd678f97bd5d6c14f4489d">PC5_SN</a> = (<span class="keywordtype">unsigned</span> long)<a class="code" href="class_c_d_p5_status.html#a4704b9bd441d23f7f5cd11a61c37607a" title="Utilities to help data processing.">DppUtil</a>.<a class="code" href="class_c_dpp_utilities.html#a0136323981ed1e622e3a8dcdaf148c19" title="Covert a long word into a double.">LongWordToDouble</a>(31, PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>);
<a name="l00409"></a>00409                 } <span class="keywordflow">else</span> {
<a name="l00410"></a>00410                         dd-&gt;<a class="code" href="struct___diag_data_type.html#a14836e38f3bd678f97bd5d6c14f4489d">PC5_SN</a> = -1; <span class="comment">// no PC5 S/N</span>
<a name="l00411"></a>00411                 }
<a name="l00412"></a>00412                 <span class="keywordflow">if</span> ((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[35] == 255) &amp;&amp; (PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[36] == 255)) {
<a name="l00413"></a>00413                         dd-&gt;<a class="code" href="struct___diag_data_type.html#afec585c7ae85ef2b3fff3615cd668ce9">PC5Initialized</a> = <span class="keyword">false</span>;
<a name="l00414"></a>00414                         dd-&gt;<a class="code" href="struct___diag_data_type.html#ac436675d1faa0cfe7c39cfdad6fea412">PC5DCAL</a> = 0;
<a name="l00415"></a>00415                 } <span class="keywordflow">else</span> {
<a name="l00416"></a>00416                         dd-&gt;<a class="code" href="struct___diag_data_type.html#afec585c7ae85ef2b3fff3615cd668ce9">PC5Initialized</a> = <span class="keyword">true</span>;
<a name="l00417"></a>00417                         dd-&gt;<a class="code" href="struct___diag_data_type.html#ac436675d1faa0cfe7c39cfdad6fea412">PC5DCAL</a> = (float)(((<span class="keywordtype">float</span>)(PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[35]) * 256.0 + (<span class="keywordtype">float</span>)(PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[36])) * 3.0 / 4096.0);
<a name="l00418"></a>00418                 }
<a name="l00419"></a>00419                 dd-&gt;<a class="code" href="struct___diag_data_type.html#abd2af86060d1666a8debd93a4f2396e6">IsPosHV</a> = ((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[37] &amp; 128) == 128);
<a name="l00420"></a>00420                 dd-&gt;<a class="code" href="struct___diag_data_type.html#af094aaf5f4b49718c69730c132ac9c49">Is8_5VPreAmp</a> = ((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[37] &amp; 64) == 64);
<a name="l00421"></a>00421                 dd-&gt;<a class="code" href="struct___diag_data_type.html#a4c8bb762065623229af67d362d0707a9">Sup9VOn</a> = ((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[38] &amp; 8) == 8);
<a name="l00422"></a>00422                 dd-&gt;<a class="code" href="struct___diag_data_type.html#aded176172a43bba386a1534c776250cb">PreAmpON</a> = ((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[38] &amp; 4) == 4);
<a name="l00423"></a>00423                 dd-&gt;<a class="code" href="struct___diag_data_type.html#a758da5aad1151b5140656cb6eb988607">HVOn</a> = ((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[38] &amp; 2) == 2);
<a name="l00424"></a>00424                 dd-&gt;<a class="code" href="struct___diag_data_type.html#a72aff50b1ecffb303af859c6e1dc8928">TECOn</a> = ((PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[38] &amp; 1) == 1);
<a name="l00425"></a>00425         } <span class="keywordflow">else</span> {
<a name="l00426"></a>00426         <span class="keywordflow">for</span>(idxVal=0;idxVal&lt;=2;idxVal++) {
<a name="l00427"></a>00427             dd-&gt;<a class="code" href="struct___diag_data_type.html#a46c5c5d57569166b3b1501e5b28e7320">PC5_V</a>[idxVal] = 0;
<a name="l00428"></a>00428                 }
<a name="l00429"></a>00429         dd-&gt;<a class="code" href="struct___diag_data_type.html#a14836e38f3bd678f97bd5d6c14f4489d">PC5_SN</a> = -1; <span class="comment">// no PC5 S/N</span>
<a name="l00430"></a>00430         dd-&gt;<a class="code" href="struct___diag_data_type.html#afec585c7ae85ef2b3fff3615cd668ce9">PC5Initialized</a> = <span class="keyword">false</span>;
<a name="l00431"></a>00431         dd-&gt;<a class="code" href="struct___diag_data_type.html#ac436675d1faa0cfe7c39cfdad6fea412">PC5DCAL</a> = 0;
<a name="l00432"></a>00432         dd-&gt;<a class="code" href="struct___diag_data_type.html#abd2af86060d1666a8debd93a4f2396e6">IsPosHV</a> = <span class="keyword">false</span>;
<a name="l00433"></a>00433         dd-&gt;<a class="code" href="struct___diag_data_type.html#af094aaf5f4b49718c69730c132ac9c49">Is8_5VPreAmp</a> = <span class="keyword">false</span>;
<a name="l00434"></a>00434         dd-&gt;<a class="code" href="struct___diag_data_type.html#a4c8bb762065623229af67d362d0707a9">Sup9VOn</a> = <span class="keyword">false</span>;
<a name="l00435"></a>00435         dd-&gt;<a class="code" href="struct___diag_data_type.html#aded176172a43bba386a1534c776250cb">PreAmpON</a> = <span class="keyword">false</span>;
<a name="l00436"></a>00436         dd-&gt;<a class="code" href="struct___diag_data_type.html#a758da5aad1151b5140656cb6eb988607">HVOn</a> = <span class="keyword">false</span>;
<a name="l00437"></a>00437         dd-&gt;<a class="code" href="struct___diag_data_type.html#a72aff50b1ecffb303af859c6e1dc8928">TECOn</a> = <span class="keyword">false</span>;
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439         <span class="keywordflow">for</span>(idxVal=0;idxVal&lt;=191;idxVal++) {
<a name="l00440"></a>00440         dd-&gt;<a class="code" href="struct___diag_data_type.html#a8030fde03ee524ee3907ca5d6afd6fdd">DiagData</a>[idxVal] = PIN.<a class="code" href="struct___packet___in.html#a3e3b66bee727a1073d6768daa60a3150">DATA</a>[idxVal + 39];
<a name="l00441"></a>00441     }
<a name="l00442"></a>00442         <span class="comment">//string strData;</span>
<a name="l00443"></a>00443         <span class="comment">//strData = DisplayBufferArray(PIN.DATA, 256);</span>
<a name="l00444"></a>00444         <span class="comment">//SaveStringDataToFile(strData);</span>
<a name="l00445"></a>00445 }
<a name="l00446"></a>00446 
<a name="l00447"></a><a class="code" href="class_c_d_p5_status.html#a1a5684463827da722cb879f4a7db923e">00447</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#a1a5684463827da722cb879f4a7db923e" title="Convert DiagDataType data into a diagnostic display string.">CDP5Status::DiagnosticsToString</a>(<a class="code" href="struct___diag_data_type.html">DiagDataType</a> dd, <span class="keywordtype">int</span> device_type)
<a name="l00448"></a>00448 {
<a name="l00449"></a>00449     <span class="keywordtype">long</span> idxVal;
<a name="l00450"></a>00450         <span class="keywordtype">string</span> strVal;
<a name="l00451"></a>00451     <span class="keywordtype">string</span> strDiag;
<a name="l00452"></a>00452         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00453"></a>00453     
<a name="l00454"></a>00454     strDiag = <span class="stringliteral">&quot;Firmware: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#ac11f26d9cebc9f8958dce55cc83ce20d" title="Format a version number value.">VersionToStr</a>(dd.<a class="code" href="struct___diag_data_type.html#ab9027532ae6c10b2123b38f707b4bcc0">Firmware</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00455"></a>00455     strDiag += <span class="stringliteral">&quot;FPGA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#ac11f26d9cebc9f8958dce55cc83ce20d" title="Format a version number value.">VersionToStr</a>(dd.<a class="code" href="struct___diag_data_type.html#adfce1d689bfe245f75a20b5aef83dbae">FPGA</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00456"></a>00456     strDiag += <span class="stringliteral">&quot;SRAM Test: &quot;</span>;
<a name="l00457"></a>00457     <span class="keywordflow">if</span> (dd.<a class="code" href="struct___diag_data_type.html#a51fdf6afe6b8b8a37cf653833f76f0ee">SRAMTestPass</a>) {
<a name="l00458"></a>00458         strDiag += <span class="stringliteral">&quot;PASS\r\n&quot;</span>;
<a name="l00459"></a>00459     } <span class="keywordflow">else</span> {
<a name="l00460"></a>00460         strDiag += <span class="stringliteral">&quot;ERROR @ 0x&quot;</span> + <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(dd.<a class="code" href="struct___diag_data_type.html#a2ff8ab48deb8345f165f3d26eb2fec66">SRAMTestData</a>, 6) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463         <span class="keywordflow">if</span> ((device_type == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5aaf3625d736638478a34d61e76e278af3" title="DP5 uses DPP new (this) protocol is supported in this application ==0.">dppDP5</a>) || (device_type == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a25bc4ac15e8ad70a638d6879d3d7bdc8" title="DP5X uses DPP new (this) protocol is supported in this application ==5.">dppDP5X</a>)) {
<a name="l00464"></a>00464                 strDiag += <span class="stringliteral">&quot;DP5 Temp (raw): &quot;</span> + dd.<a class="code" href="struct___diag_data_type.html#ac28941a7ea008ec548dff298953d5365">strTempRaw</a> + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00465"></a>00465                 strDiag += <span class="stringliteral">&quot;DP5 Temp (cal&#39;d): &quot;</span> + dd.<a class="code" href="struct___diag_data_type.html#a72555b0f3326ef34e955f77a748b7d0d">strTempCal</a> + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00466"></a>00466                 strDiag += <span class="stringliteral">&quot;PWR: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[2]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00467"></a>00467                 strDiag += <span class="stringliteral">&quot;3.3V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[3]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00468"></a>00468                 strDiag += <span class="stringliteral">&quot;2.5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[4]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00469"></a>00469                 strDiag += <span class="stringliteral">&quot;1.2V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[5]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00470"></a>00470                 strDiag += <span class="stringliteral">&quot;+5.5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[6]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00471"></a>00471                 strDiag += <span class="stringliteral">&quot;-5.5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[7]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00472"></a>00472                 strDiag += <span class="stringliteral">&quot;AN_IN: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[8]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00473"></a>00473                 strDiag += <span class="stringliteral">&quot;VREF_IN: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[9]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00474"></a>00474 
<a name="l00475"></a>00475                 strDiag += <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00476"></a>00476                 <span class="keywordflow">if</span> (dd.<a class="code" href="struct___diag_data_type.html#a853f9702254fc7234db9b24bebfba49f">PC5_PRESENT</a>) {
<a name="l00477"></a>00477                         strDiag += <span class="stringliteral">&quot;PC5: Present\r\n&quot;</span>;
<a name="l00478"></a>00478                         strVal = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%dV&quot;</span>,(<span class="keywordtype">int</span>)(dd.<a class="code" href="struct___diag_data_type.html#a46c5c5d57569166b3b1501e5b28e7320">PC5_V</a>[0]));
<a name="l00479"></a>00479                         strDiag += <span class="stringliteral">&quot;HV: &quot;</span> + strVal + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00480"></a>00480                         strVal = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%#.1fK&quot;</span>,dd.<a class="code" href="struct___diag_data_type.html#a46c5c5d57569166b3b1501e5b28e7320">PC5_V</a>[1]);
<a name="l00481"></a>00481                         strDiag += <span class="stringliteral">&quot;Detector Temp: &quot;</span> + strVal + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00482"></a>00482                         strDiag += <span class="stringliteral">&quot;+8.5/5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a46c5c5d57569166b3b1501e5b28e7320">PC5_V</a>[2]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00483"></a>00483                         <span class="keywordflow">if</span> (dd.<a class="code" href="struct___diag_data_type.html#a14836e38f3bd678f97bd5d6c14f4489d">PC5_SN</a> &gt; -1) {
<a name="l00484"></a>00484                                 strDiag += <span class="stringliteral">&quot;PC5 S/N: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a31a1a798fbfb6f586d887d6d15440e4a" title="Format a long value.">FmtLng</a>(dd.<a class="code" href="struct___diag_data_type.html#a14836e38f3bd678f97bd5d6c14f4489d">PC5_SN</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00485"></a>00485                         } <span class="keywordflow">else</span> {
<a name="l00486"></a>00486                                 strDiag += <span class="stringliteral">&quot;PC5 S/N: none\r\n&quot;</span>;
<a name="l00487"></a>00487                         }
<a name="l00488"></a>00488                         <span class="keywordflow">if</span> (dd.<a class="code" href="struct___diag_data_type.html#afec585c7ae85ef2b3fff3615cd668ce9">PC5Initialized</a>) {
<a name="l00489"></a>00489                                 strDiag += <span class="stringliteral">&quot;PC5 DCAL: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#ac436675d1faa0cfe7c39cfdad6fea412">PC5DCAL</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00490"></a>00490                         } <span class="keywordflow">else</span> {
<a name="l00491"></a>00491                                 strDiag += <span class="stringliteral">&quot;PC5 DCAL: Uninitialized\r\n&quot;</span>;
<a name="l00492"></a>00492                         }
<a name="l00493"></a>00493                         strDiag += <span class="stringliteral">&quot;PC5 Flavor: &quot;</span>;
<a name="l00494"></a>00494                         strDiag += <a class="code" href="class_c_d_p5_status.html#af2020db9e52d02e24556203cd24faf43" title="Format a boolean indicator value.">IsAorB</a>(dd.<a class="code" href="struct___diag_data_type.html#abd2af86060d1666a8debd93a4f2396e6">IsPosHV</a>, <span class="stringliteral">&quot;+HV, &quot;</span>, <span class="stringliteral">&quot;-HV, &quot;</span>);
<a name="l00495"></a>00495                         strDiag += <a class="code" href="class_c_d_p5_status.html#af2020db9e52d02e24556203cd24faf43" title="Format a boolean indicator value.">IsAorB</a>(dd.<a class="code" href="struct___diag_data_type.html#af094aaf5f4b49718c69730c132ac9c49">Is8_5VPreAmp</a>, <span class="stringliteral">&quot;8.5V preamp&quot;</span>, <span class="stringliteral">&quot;5V preamp&quot;</span>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00496"></a>00496                         strDiag += <span class="stringliteral">&quot;PC5 Supplies:\r\n&quot;</span>;
<a name="l00497"></a>00497                         strDiag += <span class="stringliteral">&quot;9V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#afcc466cd002ac73617cb948026387b72" title="Format an OnOFF indicator value.">OnOffStr</a>(dd.<a class="code" href="struct___diag_data_type.html#a4c8bb762065623229af67d362d0707a9">Sup9VOn</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00498"></a>00498                         strDiag += <span class="stringliteral">&quot;Preamp: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#afcc466cd002ac73617cb948026387b72" title="Format an OnOFF indicator value.">OnOffStr</a>(dd.<a class="code" href="struct___diag_data_type.html#aded176172a43bba386a1534c776250cb">PreAmpON</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00499"></a>00499                         strDiag += <span class="stringliteral">&quot;HV: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#afcc466cd002ac73617cb948026387b72" title="Format an OnOFF indicator value.">OnOffStr</a>(dd.<a class="code" href="struct___diag_data_type.html#a758da5aad1151b5140656cb6eb988607">HVOn</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00500"></a>00500                         strDiag += <span class="stringliteral">&quot;TEC: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#afcc466cd002ac73617cb948026387b72" title="Format an OnOFF indicator value.">OnOffStr</a>(dd.<a class="code" href="struct___diag_data_type.html#a72aff50b1ecffb303af859c6e1dc8928">TECOn</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00501"></a>00501                 } <span class="keywordflow">else</span> {
<a name="l00502"></a>00502                         strDiag += <span class="stringliteral">&quot;PC5: Not Present\r\n&quot;</span>;
<a name="l00503"></a>00503                 }
<a name="l00504"></a>00504         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (device_type == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a5180f33d76b0497ca5cdc9e26e5c3ed7" title="PX5 uses DPP new (this) protocol is supported in this application ==1.">dppPX5</a>) {
<a name="l00505"></a>00505                 strDiag += <span class="stringliteral">&quot;PX5 Temp (raw): &quot;</span> + dd.<a class="code" href="struct___diag_data_type.html#ac28941a7ea008ec548dff298953d5365">strTempRaw</a> + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00506"></a>00506                 strDiag += <span class="stringliteral">&quot;PX5 Temp (cal&#39;d): &quot;</span> + dd.<a class="code" href="struct___diag_data_type.html#a72555b0f3326ef34e955f77a748b7d0d">strTempCal</a> + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00507"></a>00507                 <span class="comment">//strDiag += &quot;PWR: &quot; + FmtPc5Pwr(dd.ADC_V[0]) + &quot;\r\n&quot;;</span>
<a name="l00508"></a>00508                 strDiag += <span class="stringliteral">&quot;9V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[0]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00509"></a>00509                 strDiag += <span class="stringliteral">&quot;3.3V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[1]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00510"></a>00510                 strDiag += <span class="stringliteral">&quot;2.5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[2]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00511"></a>00511                 strDiag += <span class="stringliteral">&quot;1.2V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[3]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00512"></a>00512                 strDiag += <span class="stringliteral">&quot;+5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[4]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00513"></a>00513                 strDiag += <span class="stringliteral">&quot;-5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[5]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00514"></a>00514                 strDiag += <span class="stringliteral">&quot;+PA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[6]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00515"></a>00515                 strDiag += <span class="stringliteral">&quot;-PA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[7]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00516"></a>00516                 strDiag += <span class="stringliteral">&quot;TEC: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[8]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00517"></a>00517                 strDiag += <span class="stringliteral">&quot;ABS(HV): &quot;</span> + <a class="code" href="class_c_d_p5_status.html#ac27c6f20395d114f1cba39c52d8e8c71" title="Format a high voltage power value.">FmtHvPwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[9]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00518"></a>00518                 strDiag += <span class="stringliteral">&quot;DET_TEMP: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a8e5f5782e85633b16f391111c6cc3d20" title="Format a pc5 temperature value.">FmtPc5Temp</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[10]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00519"></a>00519         }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     strDiag += <span class="stringliteral">&quot;\r\nDiagnostic Data\r\n&quot;</span>;
<a name="l00522"></a>00522     strDiag += <span class="stringliteral">&quot;---------------\r\n&quot;</span>;
<a name="l00523"></a>00523         <span class="keywordflow">for</span>(idxVal=0;idxVal&lt;=191;idxVal++) {
<a name="l00524"></a>00524         <span class="keywordflow">if</span> ((idxVal % 8) == 0) { 
<a name="l00525"></a>00525                         strDiag += <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(idxVal, 2) + <span class="stringliteral">&quot;:&quot;</span>;
<a name="l00526"></a>00526                 }
<a name="l00527"></a>00527         strDiag += <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(dd.<a class="code" href="struct___diag_data_type.html#a8030fde03ee524ee3907ca5d6afd6fdd">DiagData</a>[idxVal], 2) + <span class="stringliteral">&quot; &quot;</span>;
<a name="l00528"></a>00528         <span class="keywordflow">if</span> ((idxVal % 8) == 7) { 
<a name="l00529"></a>00529                         strDiag += <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00530"></a>00530                 }
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532     <span class="keywordflow">return</span> (strDiag);
<a name="l00533"></a>00533 }
<a name="l00534"></a>00534 
<a name="l00535"></a><a class="code" href="class_c_d_p5_status.html#a8f4f45da08b98bd6b2ed6d337c825287">00535</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#a8f4f45da08b98bd6b2ed6d337c825287" title="Convert PX5 Options into a display string.">CDP5Status::DiagStrPX5Option</a>(<a class="code" href="struct___diag_data_type.html">DiagDataType</a> dd, <span class="keywordtype">int</span> device_type)
<a name="l00536"></a>00536 {
<a name="l00537"></a>00537     <span class="keywordtype">long</span> idxVal;
<a name="l00538"></a>00538         <span class="keywordtype">string</span> strVal;
<a name="l00539"></a>00539     <span class="keywordtype">string</span> strDiag;
<a name="l00540"></a>00540         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00541"></a>00541    
<a name="l00542"></a>00542     strDiag = <span class="stringliteral">&quot;Firmware: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#ac11f26d9cebc9f8958dce55cc83ce20d" title="Format a version number value.">VersionToStr</a>(dd.<a class="code" href="struct___diag_data_type.html#ab9027532ae6c10b2123b38f707b4bcc0">Firmware</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00543"></a>00543     strDiag += <span class="stringliteral">&quot;FPGA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#ac11f26d9cebc9f8958dce55cc83ce20d" title="Format a version number value.">VersionToStr</a>(dd.<a class="code" href="struct___diag_data_type.html#adfce1d689bfe245f75a20b5aef83dbae">FPGA</a>) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00544"></a>00544     strDiag += <span class="stringliteral">&quot;SRAM Test: &quot;</span>;
<a name="l00545"></a>00545     <span class="keywordflow">if</span> (dd.<a class="code" href="struct___diag_data_type.html#a51fdf6afe6b8b8a37cf653833f76f0ee">SRAMTestPass</a>) {
<a name="l00546"></a>00546         strDiag += <span class="stringliteral">&quot;PASS\r\n&quot;</span>;
<a name="l00547"></a>00547     } <span class="keywordflow">else</span> {
<a name="l00548"></a>00548         strDiag += <span class="stringliteral">&quot;ERROR @ 0x&quot;</span> + <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(dd.<a class="code" href="struct___diag_data_type.html#a2ff8ab48deb8345f165f3d26eb2fec66">SRAMTestData</a>, 6) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (device_type == <a class="code" href="_dpp_const_8h.html#aa4338fd1c88099654389b58ed5d7fac5a5180f33d76b0497ca5cdc9e26e5c3ed7" title="PX5 uses DPP new (this) protocol is supported in this application ==1.">dppPX5</a>) {
<a name="l00552"></a>00552                 strDiag += <span class="stringliteral">&quot;PX5 Temp (raw): &quot;</span> + dd.<a class="code" href="struct___diag_data_type.html#ac28941a7ea008ec548dff298953d5365">strTempRaw</a> + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00553"></a>00553                 strDiag += <span class="stringliteral">&quot;PX5 Temp (cal&#39;d): &quot;</span> + dd.<a class="code" href="struct___diag_data_type.html#a72555b0f3326ef34e955f77a748b7d0d">strTempCal</a> + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00554"></a>00554                 strDiag += <span class="stringliteral">&quot;9V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[0]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00555"></a>00555                 strDiag += <span class="stringliteral">&quot;3.3V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[1]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00556"></a>00556                 strDiag += <span class="stringliteral">&quot;2.5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[2]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00557"></a>00557                 strDiag += <span class="stringliteral">&quot;TDET: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[3]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00558"></a>00558                 strDiag += <span class="stringliteral">&quot;+5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[4]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00559"></a>00559                 strDiag += <span class="stringliteral">&quot;-5V: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[5]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00560"></a>00560                 strDiag += <span class="stringliteral">&quot;+PA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[6]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00561"></a>00561                 strDiag += <span class="stringliteral">&quot;-PA: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[7]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00562"></a>00562                 strDiag += <span class="stringliteral">&quot;TEC: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">FmtPc5Pwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[8]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00563"></a>00563                 strDiag += <span class="stringliteral">&quot;ABS(HV): &quot;</span> + <a class="code" href="class_c_d_p5_status.html#ac27c6f20395d114f1cba39c52d8e8c71" title="Format a high voltage power value.">FmtHvPwr</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[9]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00564"></a>00564                 strDiag += <span class="stringliteral">&quot;DET_TEMP: &quot;</span> + <a class="code" href="class_c_d_p5_status.html#a8e5f5782e85633b16f391111c6cc3d20" title="Format a pc5 temperature value.">FmtPc5Temp</a>(dd.<a class="code" href="struct___diag_data_type.html#a281686411ec20e079f1caa219db5e3ab">ADC_V</a>[10]) + <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     strDiag += <span class="stringliteral">&quot;\r\nDiagnostic Data\r\n&quot;</span>;
<a name="l00568"></a>00568     strDiag += <span class="stringliteral">&quot;---------------\r\n&quot;</span>;
<a name="l00569"></a>00569         <span class="keywordflow">for</span>(idxVal=0;idxVal&lt;=191;idxVal++) {
<a name="l00570"></a>00570         <span class="keywordflow">if</span> ((idxVal % 8) == 0) { 
<a name="l00571"></a>00571                         strDiag += <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(idxVal, 2) + <span class="stringliteral">&quot;:&quot;</span>;
<a name="l00572"></a>00572                 }
<a name="l00573"></a>00573         strDiag += <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>(dd.<a class="code" href="struct___diag_data_type.html#a8030fde03ee524ee3907ca5d6afd6fdd">DiagData</a>[idxVal], 2) + <span class="stringliteral">&quot; &quot;</span>;
<a name="l00574"></a>00574         <span class="keywordflow">if</span> ((idxVal % 8) == 7) { 
<a name="l00575"></a>00575                         strDiag += <span class="stringliteral">&quot;\r\n&quot;</span>;
<a name="l00576"></a>00576                 }
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578     <span class="keywordflow">return</span> (strDiag);
<a name="l00579"></a>00579 }
<a name="l00580"></a>00580 
<a name="l00581"></a><a class="code" href="class_c_d_p5_status.html#ac27c6f20395d114f1cba39c52d8e8c71">00581</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#ac27c6f20395d114f1cba39c52d8e8c71" title="Format a high voltage power value.">CDP5Status::FmtHvPwr</a>(<span class="keywordtype">float</span> fVal) 
<a name="l00582"></a>00582 {
<a name="l00583"></a>00583         <span class="keywordtype">string</span> strVal;
<a name="l00584"></a>00584         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00585"></a>00585         strVal = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%#.1fV&quot;</span>, fVal);  <span class="comment">// &quot;#.##0V&quot;</span>
<a name="l00586"></a>00586         <span class="keywordflow">return</span> strVal;
<a name="l00587"></a>00587 }
<a name="l00588"></a>00588 
<a name="l00589"></a><a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4">00589</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#a237ac6b169306f1d492de1850e2273d4" title="Format a pc5 power value.">CDP5Status::FmtPc5Pwr</a>(<span class="keywordtype">float</span> fVal) 
<a name="l00590"></a>00590 {
<a name="l00591"></a>00591         <span class="keywordtype">string</span> strVal;
<a name="l00592"></a>00592         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00593"></a>00593         strVal = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%#.3fV&quot;</span>, fVal);  <span class="comment">// &quot;#.##0V&quot;</span>
<a name="l00594"></a>00594         <span class="keywordflow">return</span> strVal;
<a name="l00595"></a>00595 }
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="class_c_d_p5_status.html#a8e5f5782e85633b16f391111c6cc3d20">00597</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#a8e5f5782e85633b16f391111c6cc3d20" title="Format a pc5 temperature value.">CDP5Status::FmtPc5Temp</a>(<span class="keywordtype">float</span> fVal) 
<a name="l00598"></a>00598 {
<a name="l00599"></a>00599         <span class="keywordtype">string</span> strVal;
<a name="l00600"></a>00600         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00601"></a>00601         strVal = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%#.1fK&quot;</span>, fVal);  <span class="comment">// &quot;#.##0V&quot;</span>
<a name="l00602"></a>00602         <span class="keywordflow">return</span> strVal;
<a name="l00603"></a>00603 }
<a name="l00604"></a>00604 
<a name="l00605"></a><a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7">00605</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">CDP5Status::FmtHex</a>(<span class="keywordtype">long</span> FmtHex, <span class="keywordtype">long</span> HexDig) 
<a name="l00606"></a>00606 {
<a name="l00607"></a>00607         <span class="keywordtype">string</span> strHex;
<a name="l00608"></a>00608         <span class="keywordtype">string</span> strFmt;
<a name="l00609"></a>00609         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00610"></a>00610         strFmt = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%d&quot;</span>,HexDig);             <span class="comment">// max size of 0 pad</span>
<a name="l00611"></a>00611         strFmt = <span class="stringliteral">&quot;%0&quot;</span> + strFmt + <span class="stringliteral">&quot;X&quot;</span>;           <span class="comment">// string format specifier</span>
<a name="l00612"></a>00612         strHex = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(strFmt.c_str(), <a class="code" href="class_c_d_p5_status.html#ade8d8e46636777945d9e6bab5fe8dff7" title="Format a hexadecimal value.">FmtHex</a>);  <span class="comment">// create padded string</span>
<a name="l00613"></a>00613         <span class="keywordflow">return</span> strHex;
<a name="l00614"></a>00614 }
<a name="l00615"></a>00615 
<a name="l00616"></a><a class="code" href="class_c_d_p5_status.html#a31a1a798fbfb6f586d887d6d15440e4a">00616</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#a31a1a798fbfb6f586d887d6d15440e4a" title="Format a long value.">CDP5Status::FmtLng</a>(<span class="keywordtype">long</span> lVal) 
<a name="l00617"></a>00617 {
<a name="l00618"></a>00618         <span class="keywordtype">string</span> strVal;
<a name="l00619"></a>00619         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00620"></a>00620         strVal = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%d&quot;</span>, lVal);
<a name="l00621"></a>00621         <span class="keywordflow">return</span> strVal;
<a name="l00622"></a>00622 }
<a name="l00623"></a>00623 
<a name="l00624"></a><a class="code" href="class_c_d_p5_status.html#ac11f26d9cebc9f8958dce55cc83ce20d">00624</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#ac11f26d9cebc9f8958dce55cc83ce20d" title="Format a version number value.">CDP5Status::VersionToStr</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bVersion)
<a name="l00625"></a>00625 {
<a name="l00626"></a>00626         <span class="keywordtype">string</span> strVerMajor;
<a name="l00627"></a>00627         <span class="keywordtype">string</span> strVerMinor;
<a name="l00628"></a>00628         <span class="keywordtype">string</span> strVer;
<a name="l00629"></a>00629         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00630"></a>00630         strVerMajor = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%d&quot;</span>,((bVersion &amp; 0xF0) / 16));
<a name="l00631"></a>00631         strVerMinor = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%02d&quot;</span>,(bVersion &amp; 0x0F));
<a name="l00632"></a>00632         strVer = strVerMajor + <span class="stringliteral">&quot;.&quot;</span> + strVerMinor;
<a name="l00633"></a>00633         <span class="keywordflow">return</span> (strVer);
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00636"></a><a class="code" href="class_c_d_p5_status.html#afcc466cd002ac73617cb948026387b72">00636</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#afcc466cd002ac73617cb948026387b72" title="Format an OnOFF indicator value.">CDP5Status::OnOffStr</a>(<span class="keywordtype">bool</span> bOn)
<a name="l00637"></a>00637 {
<a name="l00638"></a>00638     <span class="keywordflow">if</span> (bOn) {
<a name="l00639"></a>00639         <span class="keywordflow">return</span>(<span class="stringliteral">&quot;ON&quot;</span>);
<a name="l00640"></a>00640     } <span class="keywordflow">else</span> {
<a name="l00641"></a>00641         <span class="keywordflow">return</span>(<span class="stringliteral">&quot;OFF&quot;</span>);
<a name="l00642"></a>00642     }
<a name="l00643"></a>00643 }
<a name="l00644"></a>00644 
<a name="l00645"></a><a class="code" href="class_c_d_p5_status.html#af2020db9e52d02e24556203cd24faf43">00645</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#af2020db9e52d02e24556203cd24faf43" title="Format a boolean indicator value.">CDP5Status::IsAorB</a>(<span class="keywordtype">bool</span> bIsA, <span class="keywordtype">string</span> strA, <span class="keywordtype">string</span> strB)
<a name="l00646"></a>00646 {
<a name="l00647"></a>00647     <span class="keywordflow">if</span> (bIsA) {
<a name="l00648"></a>00648         <span class="keywordflow">return</span>(strA);
<a name="l00649"></a>00649     } <span class="keywordflow">else</span> {
<a name="l00650"></a>00650         <span class="keywordflow">return</span>(strB);
<a name="l00651"></a>00651     }
<a name="l00652"></a>00652 }
<a name="l00653"></a>00653 
<a name="l00654"></a><a class="code" href="class_c_d_p5_status.html#aee39737859ce152bc507e5e131956ad9">00654</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#aee39737859ce152bc507e5e131956ad9" title="Format a device type indicator as a device name string.">CDP5Status::GetDeviceNameFromVal</a>(<span class="keywordtype">int</span> DeviceTypeVal) 
<a name="l00655"></a>00655 {
<a name="l00656"></a>00656     <span class="keywordtype">string</span> strDeviceType;
<a name="l00657"></a>00657         <span class="keywordflow">switch</span>(DeviceTypeVal) {
<a name="l00658"></a>00658                 <span class="keywordflow">case</span> 0:
<a name="l00659"></a>00659             strDeviceType = <span class="stringliteral">&quot;DP5&quot;</span>;
<a name="l00660"></a>00660                         <span class="keywordflow">break</span>;
<a name="l00661"></a>00661                 <span class="keywordflow">case</span> 1:
<a name="l00662"></a>00662             strDeviceType = <span class="stringliteral">&quot;PX5&quot;</span>;
<a name="l00663"></a>00663                         <span class="keywordflow">break</span>;
<a name="l00664"></a>00664                 <span class="keywordflow">case</span> 2:
<a name="l00665"></a>00665             strDeviceType = <span class="stringliteral">&quot;DP5G&quot;</span>;
<a name="l00666"></a>00666                         <span class="keywordflow">break</span>;
<a name="l00667"></a>00667                 <span class="keywordflow">case</span> 3:
<a name="l00668"></a>00668             strDeviceType = <span class="stringliteral">&quot;MCA8000D&quot;</span>;
<a name="l00669"></a>00669                         <span class="keywordflow">break</span>;
<a name="l00670"></a>00670                 <span class="keywordflow">case</span> 4:
<a name="l00671"></a>00671             strDeviceType = <span class="stringliteral">&quot;TB5&quot;</span>;
<a name="l00672"></a>00672                         <span class="keywordflow">break</span>;
<a name="l00673"></a>00673                 <span class="keywordflow">case</span> 5:
<a name="l00674"></a>00674             strDeviceType = <span class="stringliteral">&quot;DP5-X&quot;</span>;
<a name="l00675"></a>00675                         <span class="keywordflow">break</span>;
<a name="l00676"></a>00676                 <span class="keywordflow">default</span>:           <span class="comment">//if unknown set to DP5</span>
<a name="l00677"></a>00677             strDeviceType = <span class="stringliteral">&quot;DP5&quot;</span>;
<a name="l00678"></a>00678                         <span class="keywordflow">break</span>;
<a name="l00679"></a>00679         }
<a name="l00680"></a>00680     <span class="keywordflow">return</span> strDeviceType;
<a name="l00681"></a>00681 }
<a name="l00682"></a>00682 
<a name="l00683"></a><a class="code" href="class_c_d_p5_status.html#aa41ae22632e334da31911d180d5a3e97">00683</a> <span class="keywordtype">string</span> <a class="code" href="class_c_d_p5_status.html#aa41ae22632e334da31911d180d5a3e97" title="Format an string array from a data byte array of values.">CDP5Status::DisplayBufferArray</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buffer[], <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bufSizeIn)
<a name="l00684"></a>00684 {
<a name="l00685"></a>00685     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;
<a name="l00686"></a>00686         <span class="keywordtype">string</span> strVal(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00687"></a>00687         <span class="keywordtype">string</span> strMsg(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00688"></a>00688         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00689"></a>00689         <span class="keywordflow">for</span>(i=0;i&lt;bufSizeIn;i++) {
<a name="l00690"></a>00690                 strVal = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;%.2X &quot;</span>,buffer[i]);
<a name="l00691"></a>00691                 strMsg += strVal;
<a name="l00692"></a>00692                 <span class="comment">//if (((i+1) % 16) == 0 ) { </span>
<a name="l00693"></a>00693                 <span class="comment">//      strMsg += &quot;\r\n&quot;;</span>
<a name="l00694"></a>00694                 <span class="comment">//} else </span>
<a name="l00695"></a>00695                 <span class="keywordflow">if</span> (((i+1) % 8) == 0 ) {
<a name="l00696"></a>00696                 <span class="comment">//      strMsg += &quot;   &quot;;</span>
<a name="l00697"></a>00697                         <span class="comment">//strMsg += &quot;\r\n&quot;;</span>
<a name="l00698"></a>00698                         strMsg += <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00699"></a>00699                 }
<a name="l00700"></a>00700         }
<a name="l00701"></a>00701         <span class="comment">//strMsg += &quot;\n&quot;;</span>
<a name="l00702"></a>00702         <span class="keywordflow">return</span> strMsg;
<a name="l00703"></a>00703 }
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="class_c_d_p5_status.html#a3f2acc5afec208d44d369c955d1837ba">00705</a> <span class="keywordtype">void</span> <a class="code" href="class_c_d_p5_status.html#a3f2acc5afec208d44d369c955d1837ba" title="Saves a data string to a default file (vcDP5_Data.txt).">CDP5Status::SaveStringDataToFile</a>(<span class="keywordtype">string</span> strData)
<a name="l00706"></a>00706 {
<a name="l00707"></a>00707         FILE  *out;
<a name="l00708"></a>00708         <span class="keywordtype">string</span> strFilename;
<a name="l00709"></a>00709         <span class="keywordtype">string</span> strError;
<a name="l00710"></a>00710         <a class="code" href="classstringex.html">stringex</a> strfn;
<a name="l00711"></a>00711 
<a name="l00712"></a>00712         strFilename = <span class="stringliteral">&quot;vcDP5_Data.txt&quot;</span>;
<a name="l00713"></a>00713 
<a name="l00714"></a>00714         <span class="keywordflow">if</span> ( (out = fopen(strFilename.c_str(),<span class="stringliteral">&quot;w&quot;</span>)) == (FILE *) NULL)
<a name="l00715"></a>00715                 strError = strfn.<a class="code" href="classstringex.html#a8c5508af9633f92c272e99958d4fc6b0">Format</a>(<span class="stringliteral">&quot;Couldn&#39;t open %s for writing.\n&quot;</span>, strFilename.c_str());
<a name="l00716"></a>00716         <span class="keywordflow">else</span>
<a name="l00717"></a>00717         {
<a name="l00718"></a>00718                 fprintf(out,<span class="stringliteral">&quot;%s\n&quot;</span>,strData.c_str());
<a name="l00719"></a>00719         }
<a name="l00720"></a>00720         fclose(out);
<a name="l00721"></a>00721 }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 
<a name="l00727"></a>00727 
<a name="l00728"></a>00728 
<a name="l00729"></a>00729 
<a name="l00730"></a>00730 
<a name="l00731"></a>00731 
<a name="l00732"></a>00732 
<a name="l00733"></a>00733 
<a name="l00734"></a>00734 
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 21 2017 16:00:04 for gccDppConsole Test C++ SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
